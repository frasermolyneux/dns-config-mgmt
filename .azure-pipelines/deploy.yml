trigger: none

pool: 'Dedicated'

resources:
  pipelines:
  - pipeline: platform-connectivity.Validate
    source: platform-connectivity.Validate
    trigger: true

stages: 
- stage: DeployPrdPlatform
  jobs:
  - job: DeployPrdPlatformBicep
    steps:
      - task: AzureCLI@2
        displayName: DeployPrdPlatformBicep
        inputs:
          azureSubscription: 'spn-ado-Personal-Public-platform-connectivity'
          scriptType: 'pscore'
          scriptLocation: 'inlineScript'
          inlineScript: |
            az deployment sub create `
              --template-file bicep/platform.bicep `
              --location 'uksouth' `
              --parameters @params/platform.prd.json